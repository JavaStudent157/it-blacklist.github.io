{"version":3,"sources":["pages/create/index.tsx"],"names":["Create","state","useContext","GlobalState","useState","pickerVisible","setPickerVisible","submitLoading","setSubmitLoading","checked","setChecked","navigate","useNavigate","console","log","layout","footer","onChange","val","style","marginBottom","to","block","type","color","loading","onFinish","values","params","Modal","confirm","content","onConfirm","updateListApi","city","userInfo","then","res","errcode","Dialog","alert","finally","Item","name","label","rules","required","message","placeholder","trigger","onClick","title","options","cityList","visible","onClose","value","length","map","i","join","maxLength","rows"],"mappings":"2MAqHeA,UAxGU,WACvB,IAAQC,EAAUC,qBAAgBC,KAA1BF,MACR,EAA0CG,oBAAS,GAAnD,mBAAOC,EAAP,KAAsBC,EAAtB,KACA,EAA0CF,oBAAS,GAAnD,mBAAOG,EAAP,KAAsBC,EAAtB,KACA,EAA8BJ,oBAAS,GAAvC,mBAAOK,EAAP,KAAgBC,EAAhB,KACMC,EAAWC,cAyCjB,OADAC,QAAQC,IAAIb,GACL,eAAC,IAAD,CACLc,OAAO,aACPC,OACE,qCACE,eAAC,IAAD,CACEP,QAASA,EACTQ,SAAU,SAACC,GAAD,OAAOR,EAAWQ,IAC5BC,MAAO,CACL,cAAe,OACf,cAAe,OACf,QAAS,MACTC,aAAa,GAPjB,yEAUY,cAAC,IAAD,CAAMC,GAAG,aAAT,yCAEZ,cAAC,IAAD,CAAQC,OAAK,EAACC,KAAK,SAASC,MAAM,UAAUC,QAASlB,EAArD,6BAKJmB,SAAU,SAACC,GA7DQ,IAACC,IA8DLD,EA7DXlB,EAOJoB,IAAMC,QAAQ,CACZC,QAAS,6CACTC,UAAW,WACTxB,GAAiB,GACjByB,YAAc,2BACTL,GADQ,IAEXM,KAAMN,EAAOM,KAAK,GAClBC,SAAUlC,EAAMkC,YACfC,MAAK,SAACC,GACPxB,QAAQC,IAAIuB,GAEZ,OAAIA,QAAJ,IAAIA,KAAKC,QACPC,IAAOC,MAAM,CACXT,QAAS,2EACTC,UAAW,eAGbO,IAAOC,MAAM,CACXT,QAAS,2BACTC,UAAW,WACTrB,GAAU,SAIf8B,SAAQ,WACTjC,GAAiB,SA/BrB+B,IAAOC,MAAM,CACXT,QAAS,uCACTC,UAAW,gBAoCV,UAyBL,cAAC,IAAKU,KAAN,CACEC,KAAK,UACLC,MAAM,2BACNC,MAAO,CAAC,CAAEC,UAAU,EAAMC,QAAS,qDAHrC,SAKE,cAAC,IAAD,CAAOC,YAAY,iDAErB,cAAC,IAAKN,KAAN,CACEC,KAAK,OACLC,MAAM,eACNC,MAAO,CAAC,CAAEC,UAAU,EAAMC,QAAS,yCACnCE,QAAQ,YACRC,QAAS,WACP5C,GAAiB,IANrB,SASE,cAAC,IAAD,CACE6C,MAAM,2BACNC,QAASnD,EAAMoD,SACfC,QAASjD,EACTkD,QAAS,WACPjD,GAAiB,IALrB,SAOE,SAAAkD,GAAK,OAAIA,EAAMC,OACbD,EAAME,KAAI,SAACC,GAAD,OAAYA,EAAEf,SAAOgB,KAAK,KACpC,sCAEN,cAAC,IAAKlB,KAAN,CAAWC,KAAK,UAAUE,MAAO,CAAC,CAAEC,UAAU,EAAMC,QAAS,yCAA7D,SACE,cAAC,IAAD,CAAUC,YAAY,iCAAQa,UAAW,IAAMC,KAAM","file":"static/js/7.2c8934e9.chunk.js","sourcesContent":["import React, { useContext, useState } from 'react'\nimport {\n  Button,\n  Form,\n  Input,\n  TextArea,\n  CascadePicker,\n  Modal, Dialog,Checkbox\n} from 'antd-mobile'\nimport { GlobalState } from '../../store'\nimport { updateListApi } from '../../services/api'\nimport { useNavigate,Link } from 'react-router-dom'\n\nconst Create: React.FC = () => {\n  const { state } = useContext<any>(GlobalState)\n  const [pickerVisible, setPickerVisible] = useState(false)\n  const [submitLoading, setSubmitLoading] = useState(false)\n  const [checked, setChecked] = useState(false)\n  const navigate = useNavigate()\n  const handleSubmit = (params: any) => {\n    if(!checked){\n      Dialog.alert({\n        content: '请先勾选协议',\n        onConfirm: () => {},\n      })\n      return\n    }\n    Modal.confirm({\n      content: '确认要提交吗？',\n      onConfirm: () => {\n        setSubmitLoading(true)\n        updateListApi({\n          ...params,\n          city: params.city[1],\n          userInfo: state.userInfo,\n        }).then((res) => {\n          console.log(res)\n          //@ts-ignore\n          if (res?.errcode) {\n            Dialog.alert({\n              content: '内容可能含有违法违规内容',\n              onConfirm: () => {},\n            })\n          } else {\n            Dialog.alert({\n              content: '保存成功',\n              onConfirm: () => {\n                navigate(-1)\n              },\n            })\n          }\n        }).finally(() => {\n          setSubmitLoading(false)\n        })\n      },\n    })\n  }\n\n  console.log(state)\n  return <Form\n    layout=\"horizontal\"\n    footer={\n      <>\n        <Checkbox\n          checked={checked}\n          onChange={(val)=>setChecked(val)}\n          style={{\n            '--icon-size': '18px',\n            '--font-size': '14px',\n            '--gap': '6px',\n            marginBottom:8\n          }}\n        >\n          勾选代表已阅读并同意<Link to=\"/statement\">相关条款</Link>\n        </Checkbox>\n        <Button block type=\"submit\" color=\"primary\" loading={submitLoading}>\n          提交\n        </Button>\n      </>\n    }\n    onFinish={(values) => {\n      handleSubmit(values)\n    }}\n  >\n    <Form.Item\n      name=\"company\"\n      label=\"公司名称\"\n      rules={[{ required: true, message: '公司名称不能为空' }]}\n    >\n      <Input placeholder=\"请输入公司名称\"/>\n    </Form.Item>\n    <Form.Item\n      name=\"city\"\n      label=\"城市\"\n      rules={[{ required: true, message: '城市不能为空' }]}\n      trigger=\"onConfirm\"\n      onClick={() => {\n        setPickerVisible(true)\n      }}\n    >\n      <CascadePicker\n        title=\"城市选择\"\n        options={state.cityList}\n        visible={pickerVisible}\n        onClose={() => {\n          setPickerVisible(false)\n        }}\n      >{value => value.length\n        ? value.map((i: any) => i.label).join('/')\n        : '请选择城市'}</CascadePicker>\n    </Form.Item>\n    <Form.Item name=\"content\" rules={[{ required: true, message: '内容不能为空' }]}>\n      <TextArea placeholder=\"请输入内容\" maxLength={2000} rows={4}/>\n    </Form.Item>\n  </Form>\n}\n\nexport default Create"],"sourceRoot":""}