{"version":3,"file":"static/js/646.da72c03b.chunk.js","mappings":"4NA8EA,UAnE2B,WACzB,IAAQA,GAAUC,EAAAA,EAAAA,YAAgBC,EAAAA,IAA1BF,MACR,GAA0CG,EAAAA,EAAAA,WAAS,GAAnD,eAAOC,EAAP,KAAsBC,EAAtB,KACA,GAA8BF,EAAAA,EAAAA,WAAS,GAAvC,eAAOG,EAAP,KAAgBC,EAAhB,KACMC,GAAWC,EAAAA,EAAAA,MACXC,GAAWC,EAAAA,EAAAA,MA+BjB,OAAO,SAAC,KAAD,CACLC,OAAO,aACPC,QACE,iCACE,UAAC,KAAD,CACEP,QAASA,EACTQ,SAAU,SAACC,GAAD,OAASR,EAAWQ,IAC9BC,MAAO,CACL,cAAe,OACf,cAAe,OACf,QAAS,MACTC,aAAc,GAPlB,0EAUY,SAAC,KAAD,CAAMC,GAAG,aAAT,0CAEZ,SAAC,KAAD,CAAQC,OAAK,EAACC,KAAK,SAASC,MAAM,UAAUC,QAASlB,EAArD,6BAKJmB,SAAU,SAACC,GAnDQ,IAACC,EAAAA,EAoDLD,EAnDVlB,EAOLoB,EAAAA,GAAAA,QAAc,CACZC,QAAS,6CACTC,UAAW,WACTvB,GAAiB,IACjBwB,EAAAA,EAAAA,KAAkB,kBACbJ,GADY,IAEfK,SAAU9B,EAAM8B,SAChBC,YAAa,IAAIC,KACjBC,MAAOvB,EAASwB,UACfC,MAAK,WACNC,EAAAA,GAAAA,MAAa,CACXT,QAAS,2BACTC,UAAW,WACTpB,GAAU,SAGb6B,SAAQ,WACThC,GAAiB,SAvBrB+B,EAAAA,GAAAA,MAAa,CACXT,QAAS,uCACTC,UAAW,gBA0BV,UAyBL,SAAC,UAAD,CAAWU,KAAK,UAAUC,MAAO,CAAC,CAAEC,UAAU,EAAMC,QAAS,yCAA7D,UACE,SAAC,KAAD,CAAUC,YAAY,iCAAQC,UAAW,IAAMC,KAAM","sources":["pages/feedback/index.tsx"],"sourcesContent":["import React, { useContext, useState } from 'react'\r\nimport {\r\n  Button,\r\n  Form,\r\n  TextArea,\r\n  Modal, Dialog, Checkbox,\r\n} from 'antd-mobile'\r\nimport { GlobalState } from '../../store'\r\nimport { updateFeedbackApi } from '../../services/api'\r\nimport { useNavigate, Link,useLocation } from 'react-router-dom'\r\n\r\nconst Feedback: React.FC = () => {\r\n  const { state } = useContext<any>(GlobalState)\r\n  const [submitLoading, setSubmitLoading] = useState(false)\r\n  const [checked, setChecked] = useState(false)\r\n  const navigate = useNavigate()\r\n  const location = useLocation()\r\n  const handleSubmit = (params: any) => {\r\n    if (!checked) {\r\n      Dialog.alert({\r\n        content: '请先勾选协议',\r\n        onConfirm: () => {},\r\n      })\r\n      return\r\n    }\r\n    Modal.confirm({\r\n      content: '确认要提交吗？',\r\n      onConfirm: () => {\r\n        setSubmitLoading(true)\r\n        updateFeedbackApi({\r\n          ...params,\r\n          userInfo: state.userInfo,\r\n          createTime: +new Date(),\r\n          props: location.search\r\n        }).then(() => {\r\n          Dialog.alert({\r\n            content: '保存成功',\r\n            onConfirm: () => {\r\n              navigate(-1)\r\n            },\r\n          })\r\n        }).finally(() => {\r\n          setSubmitLoading(false)\r\n        })\r\n      },\r\n    })\r\n  }\r\n  return <Form\r\n    layout=\"horizontal\"\r\n    footer={\r\n      <>\r\n        <Checkbox\r\n          checked={checked}\r\n          onChange={(val) => setChecked(val)}\r\n          style={{\r\n            '--icon-size': '18px',\r\n            '--font-size': '14px',\r\n            '--gap': '6px',\r\n            marginBottom: 8,\r\n          }}\r\n        >\r\n          勾选代表已阅读并同意<Link to=\"/statement\">相关条款</Link>\r\n        </Checkbox>\r\n        <Button block type=\"submit\" color=\"primary\" loading={submitLoading}>\r\n          提交\r\n        </Button>\r\n      </>\r\n    }\r\n    onFinish={(values) => {\r\n      handleSubmit(values)\r\n    }}\r\n  >\r\n    <Form.Item name=\"content\" rules={[{ required: true, message: '内容不能为空' }]}>\r\n      <TextArea placeholder=\"我要留言…\" maxLength={2000} rows={4}/>\r\n    </Form.Item>\r\n  </Form>\r\n}\r\n\r\nexport default Feedback"],"names":["state","useContext","GlobalState","useState","submitLoading","setSubmitLoading","checked","setChecked","navigate","useNavigate","location","useLocation","layout","footer","onChange","val","style","marginBottom","to","block","type","color","loading","onFinish","values","params","Modal","content","onConfirm","updateFeedbackApi","userInfo","createTime","Date","props","search","then","Dialog","finally","name","rules","required","message","placeholder","maxLength","rows"],"sourceRoot":""}